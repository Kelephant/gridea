<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://kelephant.github.io/gridea</id>
    <title>Kelephant&apos;s  Blog</title>
    <updated>2024-04-10T08:16:26.468Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://kelephant.github.io/gridea"/>
    <link rel="self" href="https://kelephant.github.io/gridea/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://kelephant.github.io/gridea/images/avatar.png</logo>
    <icon>https://kelephant.github.io/gridea/favicon.ico</icon>
    <rights>All rights reserved 2024, Kelephant&apos;s  Blog</rights>
    <entry>
        <title type="html"><![CDATA[Cè¯­è¨€å®šæ—¶ä»»åŠ¡åº“çš„å®ç°ï¼ˆä¸€ï¼‰]]></title>
        <id>https://kelephant.github.io/gridea/post/c-yu-yan-ding-shi-ren-wu-ku-de-shi-xian-yi/</id>
        <link href="https://kelephant.github.io/gridea/post/c-yu-yan-ding-shi-ren-wu-ku-de-shi-xian-yi/">
        </link>
        <updated>2024-04-10T07:13:14.000Z</updated>
        <summary type="html"><![CDATA[<p>åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å®šæ—¶çš„æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œé€šå¸¸çš„åšæ³•æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶ååœ¨çº¿ç¨‹é‡Œæ‰§è¡Œä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå¦‚æœæœ‰Nä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ™éœ€è¦å¯åŠ¨Nä¸ªå®šæ—¶ä»»åŠ¡ã€‚è¿™ç§åšæ³•æœ‰ä»¥ä¸‹å‡ ä¸ªå¼Šç«¯ã€‚<br>
1ã€é¢‘ç¹çš„åˆ›å»ºçº¿ç¨‹å¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“è¿ä½œæ€§èƒ½ã€‚<br>
2ã€æ¯å®ç°ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ™éœ€è¦è€ƒè™‘ä»»åŠ¡çš„åˆ›å»ºï¼Œé”€æ¯ï¼Œä»»åŠ¡çš„æ‰§è¡Œï¼Œè€Œä¸”å¤§éƒ¨åˆ†çš„å†…å®¹æ˜¯å†—ä½™çš„ã€‚<br>
3ã€å¤šä»»åŠ¡ä¹‹é—´çš„åŒæ­¥é—®é¢˜ã€‚<br>
ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªå¤šå®ä¾‹å•çº¿ç¨‹å¤šä»»åŠ¡çš„å®šæ—¶å™¨åº“ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å®šæ—¶çš„æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œé€šå¸¸çš„åšæ³•æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶ååœ¨çº¿ç¨‹é‡Œæ‰§è¡Œä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå¦‚æœæœ‰Nä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ™éœ€è¦å¯åŠ¨Nä¸ªå®šæ—¶ä»»åŠ¡ã€‚è¿™ç§åšæ³•æœ‰ä»¥ä¸‹å‡ ä¸ªå¼Šç«¯ã€‚<br>
1ã€é¢‘ç¹çš„åˆ›å»ºçº¿ç¨‹å¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“è¿ä½œæ€§èƒ½ã€‚<br>
2ã€æ¯å®ç°ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ™éœ€è¦è€ƒè™‘ä»»åŠ¡çš„åˆ›å»ºï¼Œé”€æ¯ï¼Œä»»åŠ¡çš„æ‰§è¡Œï¼Œè€Œä¸”å¤§éƒ¨åˆ†çš„å†…å®¹æ˜¯å†—ä½™çš„ã€‚<br>
3ã€å¤šä»»åŠ¡ä¹‹é—´çš„åŒæ­¥é—®é¢˜ã€‚<br>
ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªå¤šå®ä¾‹å•çº¿ç¨‹å¤šä»»åŠ¡çš„å®šæ—¶å™¨åº“ã€‚</p>
<!-- more -->
<h1 id="å®ç°æ–¹æ¡ˆ">å®ç°æ–¹æ¡ˆ</h1>
<h2 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h2>
<pre><code>typedef struct {
   struct list_head       head;                    // é“¾è¡¨å¤´
   mtimer_task_callback   run;                     // ä»»åŠ¡å›è°ƒ
   unsigned int        id;                         // å®šæ—¶ä»»åŠ¡id
   unsigned int        last_tick;                  // ä¸Šä¸€æ¬¡æ‰§è¡Œçš„æ—¶é—´
   unsigned int        timeout;                    // å®šæ—¶çš„è¶…æ—¶æ—¶é—´ï¼Œms
   mtimer_task_mode    mode;                       // å®šæ—¶ä»»åŠ¡çš„å·¥ä½œæ¨¡å¼ï¼Œä¸¤ç§å·¥ä½œæ¨¡å¼ã€‚
   void           *user_data1;                     // å®šæ—¶ä»»åŠ¡çš„ä¸Šä¸‹æ–‡1
   void           *user_data2;                     // å®šæ—¶ä»»åŠ¡çš„ä¸Šä¸‹æ–‡2
   unsigned int        remove;                     // å®šæ—¶ä»»åŠ¡æ˜¯å¦æ ‡è®°åˆ é™¤
} mtimer_task;                                      // å®šæ—¶ä»»åŠ¡èŠ‚ç‚¹

typedef struct {
   struct list_head    list;                       // ä»»åŠ¡åˆ—è¡¨
   pthread_mutex_t  lock;                          // é”
   unsigned int            id;                     // å¾…åˆ†é…çš„å®šæ—¶å™¨ä»»åŠ¡id
   mtimer_get_current_time get_current_time;       // è·å–mså€¼çš„æ¥å£
} mtimer_handle;                                    // å®šæ—¶å™¨å®ä¾‹
</code></pre>
<h2 id="å·¥ä½œæ¨¡å¼">å·¥ä½œæ¨¡å¼</h2>
<h3 id="å®šæ—¶å™¨æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼">å®šæ—¶å™¨æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼</h3>
<pre><code>typedef enum {
   MTIMER_MODE_LOOP = 0,        // å¾ªç¯ä»»åŠ¡ï¼Œæ¯éš”ä¸€ä¸ªtimeoutæ‰§è¡Œä¸€æ¬¡
   MTIMER_MODE_NOT_LOOP,        // éå¾ªç¯ä»»åŠ¡ï¼Œä»…åœ¨timeoutæ—¶æ‰§è¡Œä¸€æ¬¡
} mtimer_task_mode;
</code></pre>
<h2 id="æ¥å£">æ¥å£</h2>
<pre><code>/*****************************************************************************
å‡½ æ•° å  : mtimer_create
åŠŸèƒ½æè¿°  : åˆ›å»ºå®šæ—¶å™¨åº“å®ä¾‹
è¾“å…¥å‚æ•°  : mtimer_get_current_time func  
è¾“å‡ºå‚æ•°  : æ— 
è¿” å› å€¼  : void
           NULL    : åˆ›å»ºå¤±è´¥
           éNULL   : åˆ›å»ºæˆåŠŸ
*****************************************************************************/
void *mtimer_create(mtimer_get_current_time func);

/*****************************************************************************
å‡½ æ•° å  : mtimer_destroy
åŠŸèƒ½æè¿°  : é”€æ¯å®šæ—¶å™¨åº“å®ä¾‹
è¾“å…¥å‚æ•°  : void *handle  
è¾“å‡ºå‚æ•°  : æ— 
è¿” å› å€¼  : int
           0   æˆåŠŸ
           &lt;0  å¤±è´¥
*****************************************************************************/
int mtimer_destroy(void *handle);

/*****************************************************************************
å‡½ æ•° å  : mtimer_task_reg
åŠŸèƒ½æè¿°  : æ³¨å†Œå®šæ—¶å™¨ä»»åŠ¡
è¾“å…¥å‚æ•°  : void *handle                 
            mtimer_task_callback run  ä»»åŠ¡å›è°ƒ
            unsigned int    timeout   è¶…æ—¶æ—¶é—´
            mtimer_task_mode    mode  LOOP:å¾ªç¯, æ¯éš”timeoutè§¦å‘ä¸€æ¬¡; NOT_LOOP:ä»…è¿è¡Œä¸€æ¬¡
            void       *user_data1    å›è°ƒå‚æ•°1
            void       *user_data2    å›è°ƒå‚æ•°2
è¾“å‡ºå‚æ•°  : æ— 
è¿” å› å€¼  : unsigned
           è¿”å›å®šæ—¶å™¨id
*****************************************************************************/
unsigned int mtimer_task_reg(
   void *handle,
   mtimer_task_callback run,
   unsigned int    timeout,
   mtimer_task_mode    mode,
   void       *user_data1,
   void       *user_data2);

/*****************************************************************************
å‡½ æ•° å  : mtimer_task_unreg
åŠŸèƒ½æè¿°  : åæ³¨å†Œå®šæ—¶å™¨ä»»åŠ¡
è¾“å…¥å‚æ•°  : void *handle          
            unsigned int task_id   å®šæ—¶ä»»åŠ¡id  
è¾“å‡ºå‚æ•°  : æ— 
è¿” å› å€¼  : 0: åæ³¨å†ŒæˆåŠŸ
           &lt;0: åæ³¨å†Œå¤±è´¥
*****************************************************************************/
int mtimer_task_unreg(void *handle, unsigned int task_id);

/*****************************************************************************
å‡½ æ•° å  : mtimer_schedule
åŠŸèƒ½æè¿°  : å®šæ—¶ä»»åŠ¡è°ƒåº¦
è¾“å…¥å‚æ•°  : void *handle    
            unsigned int n  æœ€å¤šå¯æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡æ•°ï¼Œé˜²æ­¢çº¿ç¨‹é˜»å¡å¤ªé•¿æ—¶é—´
è¾“å‡ºå‚æ•°  : æ— 
è¿” å› å€¼  : 0  æ‰§è¡Œæ­£å¸¸
           &lt;0  æ‰§è¡Œå¼‚å¸¸
*****************************************************************************/
int mtimer_schedule(void *handle, unsigned int n);
</code></pre>
<h3 id="ä½¿ç”¨èŒƒä¾‹">ä½¿ç”¨èŒƒä¾‹</h3>
<pre><code>int func1(void *data1, void *data2)
{
   log_error(&quot;[time:%u, func1], data1:%s, data2:%s\n&quot;, Clock_GetTimeMs(),
             (char *)data1, (char *)data2);
   return 0;
}

int func2(void *data1, void *data2)
{
   log_error(&quot;[time:%u, func2], data1:%s, data2:%s\n&quot;, Clock_GetTimeMs(),
             (char *)data1, (char *)data2);
   return 0;
}

void *mtimer_debug_loop(void *handle)
{

   unsigned id1, id2;

   log_error(&quot;tick: %u------------------------------------ 1\n\n&quot;,
             Clock_GetTimeMs());
   id1 = mtimer_task_reg(handle, func1, 500, MTIMER_MODE_LOOP, &quot;1data1&quot;, &quot;1data2&quot;);
   id2 = mtimer_task_reg(handle, func2, 1000, MTIMER_MODE_NOT_LOOP, &quot;2data1&quot;,
                         &quot;2data2&quot;);
   while (1) {
       mtimer_schedule(handle, 10);
       Clock_SleepMs(100);
   }

   mtimer_destroy(handle);

   return NULL;
}

int mtimer_debug()
{
   void *handle;
   if (IS_NULL(handle = mtimer_create(Clock_GetTimeMs))) {
       log_error(&quot;mtimer_create failed\n&quot;);
       return -1;
   }

   pthread_t tid;
   pthread_create(&amp;tid, NULL, mtimer_debug_loop, (void *)handle);
   pthread_detach(tid);

   return 0;
}
</code></pre>
<h1 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h1>
<p>ä»£ç è¿˜æ²¡æœ‰æ•´ç†å¥½ï¼Œåç»­æ•´ç†å®Œä¹‹åä¼šæœ‰æ›´æ–°ï¼Œè¿«åˆ‡éœ€è¦çš„å¯ä»¥ç§èŠ</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[openbmc å¼‚å¸¸æ ˆåˆ†æåŠå¤ç›˜]]></title>
        <id>https://kelephant.github.io/gridea/post/openbmc-yi-chang-zhan-fen-xi-ji-fu-pan/</id>
        <link href="https://kelephant.github.io/gridea/post/openbmc-yi-chang-zhan-fen-xi-ji-fu-pan/">
        </link>
        <updated>2024-04-09T14:53:33.000Z</updated>
        <summary type="html"><![CDATA[<p>Openbmc ipmiåœ¨è¿è¡Œä¹‹åï¼Œå‡ºç°æ®µé”™è¯¯</p>
]]></summary>
        <content type="html"><![CDATA[<p>Openbmc ipmiåœ¨è¿è¡Œä¹‹åï¼Œå‡ºç°æ®µé”™è¯¯</p>
<!-- more -->
<h1 id="èƒŒæ™¯">èƒŒæ™¯</h1>
<p>Openbmc ipmiåœ¨è¿è¡Œä¹‹åï¼Œå‡ºç°æ®µé”™è¯¯ï¼Œæ®µé”™è¯¯çš„dumpä¿¡æ¯å¦‚ä¸‹</p>
<p>é€šè¿‡å †æ ˆå¯ä»¥çœ‹åˆ°å¼‚å¸¸åœ¨opensslåº“é‡Œé¢ï¼Œå†å¾€ä¸Šè¿½è¸ªå·²ç»æ²¡æœ‰æ ˆäº†</p>
<h1 id="åˆ†æ">åˆ†æ</h1>
<p>Opensslåº“æ­£å¸¸æ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ï¼Œå¯ä»¥å…ˆæš‚æ—¶å…ˆæ’é™¤ã€‚å†å¾€ä¸Šå°±æ˜¯æ ˆè¢«ç ´åäº†ï¼Œè°è°ƒç”¨EVP_Q_macä¸çŸ¥é“ï¼Œåˆ†æåˆ°è¿™é‡Œå°±æ‡’å¾—å†å¾€ä¸‹è¿½è¸ªäº†ã€‚åç»­é€šè¿‡æ›¿æ¢openbmcç‰ˆæœ¬ï¼Œipmiç‰ˆæœ¬å°è¯•è§£å†³ï¼Œåšäº†å¾ˆå¤šæ— ç”¨åŠŸã€‚æœ€é¢ï¼Œé€šè¿‡åˆ†ægithubä¸Šçš„logæ‰æ‰¾åˆ°çœŸæ­£çš„é—®é¢˜ã€‚å¦‚æœå½“åˆç¡¬ç€å¤´çš®ï¼Œå¾€ä¸‹æƒ³æƒ³ï¼Œæˆ–è®¸èƒ½æ›´å¿«å‘ç°é—®é¢˜ï¼Œè¯¥åæ€åæ€ã€‚</p>
<ol>
<li>è°è°ƒç”¨äº†EVP_Q_macï¼Ÿ
<ol>
<li>
<p>Ipmiå¹¶æ²¡æœ‰ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œé‚£å°±æ˜¯é—´æ¥è°ƒç”¨ï¼Œå¦‚æœåº“æ²¡æœ‰å¸¦ç¬¦å·è¡¨ï¼Œé‚£é—®é¢˜å¤æ‚åº¦æ›´é«˜äº†ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰æ²¡æœ‰ç¬¦å·è¡¨</strong></p>
<ol>
<li><strong>å¦‚æœæ˜¯ç›´æ¥è°ƒç”¨ï¼Œæˆ‘ä»¬ç›´æ¥æ‰“å°å‚æ•°å†…å®¹</strong></li>
<li><strong>é—´æ¥è°ƒç”¨ï¼Œéœ€è¦æ‰¾åˆ°EVP_Q_macçš„å„ç§å¼•ç”¨å‡½æ•°ï¼Œå†ä¸€ä¸ªä¸ªè¿½è¸ªå¼•ç”¨å‡½æ•°</strong></li>
</ol>
<p><strong>ï¼ˆ2ï¼‰æœ‰ç¬¦å·è¡¨ï¼šé€šè¿‡è®¾ç½®æ–­ç‚¹ï¼Œåœ¨æ ˆè¢«ç ´åå‰ï¼ŒæŠŠå‡½æ•°åœä½ï¼ŒæŠŠæ ˆå…ˆæ‰“å‡ºæ¥ï¼Œè¿™æ ·å°±æ¸…æ¥šå¼‚å¸¸çš„å…·ä½“ä½ç½®äº†ã€‚</strong></p>
<ol>
<li>åœ¨å¼‚å¸¸çš„ä½ç½®è®¾ç½®ä¸€ä¸ªæ–­ç‚¹</li>
<li>run</li>
<li>åœ¨è¿è¡Œåˆ°æ–­ç‚¹çš„æ—¶å€™è‡ªåŠ¨åœæ­¢ï¼Œæ‰§è¡Œbtï¼Œé€šè¿‡è¿™ä¸ªæ–¹å¼å°±èƒ½çœ‹åˆ°å¼‚å¸¸çš„ç‚¹åœ¨read passwordäº†<br>
<img src="https://kelephant.github.io/gridea/post-images/1712674496787.png" alt="" loading="lazy"></li>
</ol>
</li>
<li>
<p>æ ˆä¸ºä»€ä¹ˆè¢«ç ´åï¼Ÿè¢«ç ´åçš„æ ˆæœ‰æ²¡æœ‰åŠæ³•æ¢å¤ï¼Œæˆ–è€…è°ƒè¯•æ‰‹æ®µé˜²æ­¢æ ˆè¢«ç ´åï¼Ÿ</p>
<ol>
<li>Gdbåœ¨æ‰§è¡Œæ—¶æ˜¯å¦èƒ½åŠ å‚æ•°ï¼Œä¿æŠ¤æ ˆä¸è¢«ç ´åï¼Ÿä¼¼ä¹æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•</li>
<li>Gccç¼–è¯‘å‚æ•°ï¼Œå‚è€ƒä¸‹é¢çš„æ–‡ç« ï¼šhttps://outflux.net/blog/archives/2014/01/27/fstack-protector-strong/</li>
</ol>
</li>
</ol>
</li>
</ol>
<h1 id="64ä½ç³»ç»Ÿåœ°å€ç¿»è¯‘">64ä½ç³»ç»Ÿåœ°å€ç¿»è¯‘</h1>
<ol>
<li>æ‰¾åˆ°å¼‚å¸¸åœ°å€å¯¹åº”çš„æ®µï¼ˆ/proc/{pid}/mapsï¼‰</li>
<li>å°†åœ°å€ä¸æ®µçš„èµ·å§‹åœ°å€ï¼Œä½œå·®ï¼Œå³å¯å¾—åˆ°å¼‚å¸¸çš„ä½ç½®</li>
<li>å¦‚æœæ˜¯.soæ–‡ä»¶ï¼Œé€šè¿‡objdump -d libcrypto.so.3 | grep 1b02a0(è¿™ä¸ªæ˜¯ä½œå·®åçš„å€¼)</li>
<li>å¦‚æœæ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šè¿‡addr2lineå³å¯</li>
</ol>
<h1 id="å…¶ä»–">å…¶ä»–</h1>
<h2 id="åŠ¨æ€åº“åŠ è½½æƒ…å†µ">åŠ¨æ€åº“åŠ è½½æƒ…å†µ</h2>
<p>info sharedlibrary</p>
<h2 id="æ‰€æœ‰çº¿ç¨‹çš„bt">æ‰€æœ‰çº¿ç¨‹çš„bt</h2>
<p>thread apply all bt</p>
<p>ä½¿ç”¨è¯¥åŠæ³•å¯ä»¥å®šä½æ­»é”é—®é¢˜</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è®°ä¸€æ¬¡å†…æ ¸æ­»é”çš„è°ƒè¯•è¿‡ç¨‹]]></title>
        <id>https://kelephant.github.io/gridea/post/ji-yi-ci-nei-he-si-suo-de-diao-shi-guo-cheng/</id>
        <link href="https://kelephant.github.io/gridea/post/ji-yi-ci-nei-he-si-suo-de-diao-shi-guo-cheng/">
        </link>
        <updated>2024-04-09T14:39:02.000Z</updated>
        <content type="html"><![CDATA[<h1 id="kernelå…³æœºæ­»é”é—®">Kernelå…³æœºæ­»é”é—®</h1>
<h1 id="èƒŒæ™¯">èƒŒæ™¯</h1>
<h2 id="å†…æ ¸ç‰ˆæœ¬">å†…æ ¸ç‰ˆæœ¬</h2>
<p>Linux 4.4.194 ohci_hcd</p>
<h2 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h2>
<p><strong>æ‰§è¡Œshutdown -h now</strong></p>
<pre><code>[Â  OKÂ  ] Stopped Load Kernel Modules.

[Â  OKÂ  ] Unmounted /share.

[Â  OKÂ  ] Stopped target Local File Systems (Pre).

[Â  OKÂ  ] Reached target Unmount All Filesystems.

[Â  OKÂ  ] Stopped Create Static Device Nodes in /dev.

[Â  OKÂ  ] Stopped Create System Users.

[Â  OKÂ  ] Stopped Remount Root and Kernel File Systems.

[Â  OKÂ  ] Reached target Shutdown.

[Â  OKÂ  ] Reached target Final Step.

[Â  OKÂ  ] Finished Power-Off.

[Â  OKÂ  ] Reached target Power-Off.

[Â Â  69.279680]

[Â Â  69.281172] ======================================================

[Â Â  69.287345] [ INFO: possible circular locking dependency detected ]

[Â Â  69.293605] 4.4.194 #1 Not tainted

[Â Â  69.297001] -------------------------------------------------------

[Â Â  69.303265] systemd-shutdow/1 is trying to acquire lock:

[Â Â  69.303286]Â  (&amp;policy-&gt;rwsem){+++++.}, at: [&lt;ffffff800884335c&gt;] cpufreq_update_policy+0x40/0x158

[Â Â  69.303287]

[Â Â  69.303287] but task is already holding lock:

[Â Â  69.303300]Â  (mdev_list_sem){++++..}, at: [&lt;ffffff80085577d0&gt;] rockchip_system_status_notifier+0x34/0x118

[Â Â  69.303302]

[Â Â  69.303302] which lock already depends on the new lock.

[Â Â  69.303302]

[Â Â  69.303303]

[Â Â  69.303303] the existing dependency chain (in reverse order) is:

[Â Â  69.303307]

[Â Â  69.303307] -&gt; #2 (mdev_list_sem){++++..}:

[Â Â  69.303313]Â Â Â Â Â Â Â  [&lt;ffffff800811f264&gt;] __lock_acquire+0x1348/0x191c

[Â Â  69.303317]Â Â Â Â Â Â Â  [&lt;ffffff800811febc&gt;] lock_acquire+0x1e0/0x23c

[Â Â  69.303323]Â Â Â Â Â Â Â  [&lt;ffffff8008c4ea64&gt;] down_read+0x5c/0xdc

[Â Â  69.303327DDR Version 1.24 20191016

In

---

æ‰§è¡Œrebootï¼Œå†…æ ¸deadlockï¼Œä¼šè‡ªåŠ¨é‡å¯

Stopping WPA supplicant...

[Â  OKÂ  ] Stopped WPA supplicant.

Stopping D-Bus System Message Bus...

[Â  OKÂ  ] Stopped D-Bus System Message Bus.

[Â  OKÂ  ] Stopped target Basic System.

[Â  OKÂ  ] Stopped target Paths.

[Â  OKÂ  ] Stopped target Slices.

[Â  OKÂ  ] Removed slice User and Session Slice.

[Â  OKÂ  ] Stopped target Sockets.

[Â  OKÂ  ] Closed D-Bus System Message Bus Socket.

[Â  OKÂ  ] Closed Docker Socket for the API.

[Â  OKÂ  ] Stopped target System Initialization.

[Â  OKÂ  ] Stopped target Local Encrypted Volumes.

[Â  OKÂ  ] Stopped Dispatch Password â€¦ts to Console Directory Watch.

[Â  OKÂ  ] Stopped Forward Password Râ€¦uests to Wall Directory Watch.

[Â  OKÂ  ] Stopped target Swap.

[Â  OKÂ  ] Closed Syslog Socket.

Stopping Network Time Synchronization...

Stopping Update UTMP about System Boot/Shutdown...

[Â  OKÂ  ] Stopped Network Name Resolution.

[Â  OKÂ  ] Stopped Update UTMP about System Boot/Shutdown.

[Â  OKÂ  ] Stopped ifup for eth0.

[Â  OKÂ  ] Stopped Network Time Synchronization.

[Â  OKÂ  ] Stopped Create Volatile Files and Directories.

[Â  OKÂ  ] Stopped ifup for eth1.13.

[Â  OKÂ  ] Stopped ifup for eth1.

[Â  OKÂ  ] Stopped Raise network interfaces.

[Â  OKÂ  ] Stopped target Local File Systems.

Unmounting /share...

[Â  OKÂ  ] Stopped Apply Kernel Variables.

[Â  OKÂ  ] Stopped Load Kernel Modules.

[Â  OKÂ  ] Unmounted /share.

[Â  OKÂ  ] Stopped target Local File Systems (Pre).

[Â  OKÂ  ] Reached target Unmount All Filesystems.

[Â  OKÂ  ] Stopped Create Static Device Nodes in /dev.

[Â  OKÂ  ] Stopped Create System Users.

[Â  OKÂ  ] Stopped Remount Root and Kernel File Systems.

[Â  OKÂ  ] Reached target Shutdown.

[Â  OKÂ  ] Reached target Final Step.

[Â  OKÂ  ] Finished Reboot.

[Â  OKÂ  ] Reached target Reboot.

[Â Â  21.169263] dw_wdt: unexpected close, system will reboot soon

[Â Â  21.550470]

[Â Â  21.551963] ======================================================

[Â Â  21.558139] [ INFO: possible circular locking dependency detected ]

[Â Â  21.564401] 4.4.194 #1 Not tainted

[Â Â  21.567799] -------------------------------------------------------

[Â Â  21.574059] systemd-shutdow/1 is trying to acquire lock:

[Â Â  21.579364]Â  (&amp;policy-&gt;rwsem){+++++.}, at: [&lt;ffffff800884335c&gt;] cpufreq_update_policy+0x40/0x158

[Â Â  21.588223]

[Â Â  21.588223] but task is already holding lock:

[Â Â  21.594049]Â  (mdev_list_sem){++++..}, at: [&lt;ffffff80085577d0&gt;] rockchip_system_status_notifier+0x34/0x118

[Â Â  21.603681]

[Â Â  21.603681] which lock already depends on the new lock.

[Â Â  21.603681]

[Â Â  21.611852]

[Â Â  21.611852] the existing dependency chain (in reverse order) is:

[Â Â  21.619321]

- &gt; #2 (mdev_list_sem){++++..}:

[Â Â  21.623668]Â Â Â Â Â Â Â  [&lt;ffffff800811f264&gt;] __lock_acquire+0x1348/0x191c

[Â Â  21.630031]Â Â Â Â Â Â Â  [&lt;ffffff800811febc&gt;] lock_acquire+0x1e0/0x23c

[Â Â  21.636052]Â Â Â Â Â Â Â  [&lt;ffffff8008c4ea64&gt;] down_read+0x5c/0xdc

[Â Â  21.641641]Â Â Â Â Â Â Â  [&lt;ffffff8008557310&gt;] rockchip_monitor_cpufreq_policy_notifier+0x48/0x18c

[Â Â  21.649995]Â Â Â Â Â Â Â  [&lt;ffffff80080e0c94&gt;] notifier_call_chain+0x78/0x98

[Â Â  21.656451]Â Â Â Â Â Â Â  [&lt;ffffff80080e10b0&gt;] __blocking_notifier_call_chain+0x58/0x84

[Â Â  21.663850]Â Â Â Â Â Â Â  [&lt;ffffff80080e1118&gt;] blocking_notifier_call_chain+0x3c/0x4c

[Â Â  21.671079]Â Â Â Â Â Â Â  [&lt;ffffff8008842f48&gt;] cpufreq_set_policy+0xac/0x480

[Â Â  21.677535]Â Â Â Â Â Â Â  [&lt;ffffff8008843adc&gt;] cpufreq_init_policy+0x90/0xc0

[Â Â  21.683990]Â Â Â Â Â Â Â  [&lt;ffffff80088443a4&gt;] cpufreq_online+0x694/0x70c

[Â Â  21.690181]Â Â Â Â Â Â Â  [&lt;ffffff8008844514&gt;] cpufreq_add_dev+0x7c/0xd0

[Â Â  21.696286]Â Â Â Â Â Â Â  [&lt;ffffff800865d148&gt;] subsys_interface_register+0xb8/0xcc

[Â Â  21.703264]Â Â Â Â Â Â Â  [&lt;ffffff80088437b8&gt;] cpufreq_register_driver+0x134/0x204

[Â Â  21.710239]Â Â Â Â Â Â Â  [&lt;ffffff800884dff4&gt;] dt_cpufreq_probe+0x158/0x174

[Â Â  21.716600]Â Â Â Â Â Â Â  [&lt;ffffff80086611fc&gt;] platform_drv_probe+0x5c/0xb0

[Â Â  21.722960]Â Â Â Â Â Â Â  [&lt;ffffff800865ed5c&gt;] driver_probe_device+0x264/0x3d4

[Â Â  21.729585]Â Â Â Â Â Â Â  [&lt;ffffff800865f034&gt;] __device_attach_driver+0x68/0xa4

[Â Â  21.736295]Â Â Â Â Â Â Â  [&lt;ffffff800865ce08&gt;] bus_for_each_drv+0x90/0xa0

[Â Â  21.742486]Â Â Â Â Â Â Â  [&lt;ffffff800865e9e8&gt;] __device_attach+0xb4/0x130

[Â Â  21.748676]Â Â Â Â Â Â Â  [&lt;ffffff800865f1d0&gt;] device_initial_probe+0x24/0x30

[Â Â  21.755217]Â Â Â Â Â Â Â  [&lt;ffffff800865de5c&gt;] bus_probe_device+0x38/0x9c

[Â Â  21.761407]Â Â Â Â Â Â Â  [&lt;ffffff800865bb84&gt;] device_add+0x480/0x528

[Â Â  21.767247]Â Â Â Â Â Â Â  [&lt;ffffff8008660ee4&gt;] platform_device_add+0xe8/0x22c

[Â Â  21.773786]Â Â Â Â Â Â Â  [&lt;ffffff8008661ae8&gt;] platform_device_register_full+0xac/0xec

[Â Â  21.781100]Â Â Â Â Â Â Â  [&lt;ffffff80091fd464&gt;] rockchip_cpufreq_driver_init+0xb8/0x2f8

[Â Â  21.788417]Â Â Â Â Â Â Â  [&lt;ffffff80080830f8&gt;] do_one_initcall+0x78/0x198

[Â Â  21.794608]Â Â Â Â Â Â Â  [&lt;ffffff80091c0e94&gt;] kernel_init_freeable+0x27c/0x280

[Â Â  21.801319]Â Â Â Â Â Â Â  [&lt;ffffff8008c4a0e8&gt;] kernel_init+0x18/0x100

[Â Â  21.807159]Â Â Â Â Â Â Â  [&lt;ffffff8008082f10&gt;] ret_from_fork+0x10/0x40

[Â Â  21.813084]

- &gt; #1 ((cpufreq_policy_notifier_list).rwsem){.+.+.+}:

[Â Â  21.819422]Â Â Â Â Â Â Â  [&lt;ffffff800811f264&gt;] __lock_acquire+0x1348/0x191c

[Â Â  21.825782]Â Â Â Â Â Â Â  [&lt;ffffff800811febc&gt;] lock_acquire+0x1e0/0x23c

[Â Â  21.831803]Â Â Â Â Â Â Â  [&lt;ffffff8008c4ea64&gt;] down_read+0x5c/0xdc

[Â Â  21.837389]Â Â Â Â Â Â Â  [&lt;ffffff80080e1098&gt;] __blocking_notifier_call_chain+0x40/0x84

[Â Â  21.844787]Â Â Â Â Â Â Â  [&lt;ffffff80080e1118&gt;] blocking_notifier_call_chain+0x3c/0x4c

[Â Â  21.852015]Â Â Â Â Â Â Â  [&lt;ffffff8008844350&gt;] cpufreq_online+0x640/0x70c

[Â Â  21.858206]Â Â Â Â Â Â Â  [&lt;ffffff8008844514&gt;] cpufreq_add_dev+0x7c/0xd0

[Â Â  21.864312]Â Â Â Â Â Â Â  [&lt;ffffff800865d148&gt;] subsys_interface_register+0xb8/0xcc

[Â Â  21.871287]Â Â Â Â Â Â Â  [&lt;ffffff80088437b8&gt;] cpufreq_register_driver+0x134/0x204

[Â Â  21.878262]Â Â Â Â Â Â Â  [&lt;ffffff800884dff4&gt;] dt_cpufreq_probe+0x158/0x174

[Â Â  21.884623]Â Â Â Â Â Â Â  [&lt;ffffff80086611fc&gt;] platform_drv_probe+0x5c/0xb0

[Â Â  21.890982]Â Â Â Â Â Â Â  [&lt;ffffff800865ed5c&gt;] driver_probe_device+0x264/0x3d4

[Â Â  21.897607]Â Â Â Â Â Â Â  [&lt;ffffff800865f034&gt;] __device_attach_driver+0x68/0xa4

[Â Â  21.904317]Â Â Â Â Â Â Â  [&lt;ffffff800865ce08&gt;] bus_for_each_drv+0x90/0xa0

[Â Â  21.910507]Â Â Â Â Â Â Â  [&lt;ffffff800865e9e8&gt;] __device_attach+0xb4/0x130

[Â Â  21.916698]Â Â Â Â Â Â Â  [&lt;ffffff800865f1d0&gt;] device_initial_probe+0x24/0x30

[Â Â  21.923238]Â Â Â Â Â Â Â  [&lt;ffffff800865de5c&gt;] bus_probe_device+0x38/0x9c

[Â Â  21.929429]Â Â Â Â Â Â Â  [&lt;ffffff800865bb84&gt;] device_add+0x480/0x528

[Â Â  21.935269]Â Â Â Â Â Â Â  [&lt;ffffff8008660ee4&gt;] platform_device_add+0xe8/0x22c

[Â Â  21.941809]Â Â Â Â Â Â Â  [&lt;ffffff8008661ae8&gt;] platform_device_register_full+0xac/0xec

[Â Â  21.949122]Â Â Â Â Â Â Â  [&lt;ffffff80091fd464&gt;] rockchip_cpufreq_driver_init+0xb8/0x2f8

[Â Â  21.956436]Â Â Â Â Â Â Â  [&lt;ffffff80080830f8&gt;] do_one_initcall+0x78/0x198

[Â Â  21.962626]Â Â Â Â Â Â Â  [&lt;ffffff80091c0e94&gt;] kernel_init_freeable+0x27c/0x280

[Â Â  21.969335]Â Â Â Â Â Â Â  [&lt;ffffff8008c4a0e8&gt;] kernel_init+0x18/0x100

[Â Â  21.975176]Â Â Â Â Â Â Â  [&lt;ffffff8008082f10&gt;] ret_from_fork+0x10/0x40

[Â Â  21.981101]

- &gt; #0 (&amp;policy-&gt;rwsem){+++++.}:

[Â Â  21.985531]Â Â Â Â Â Â Â  [&lt;ffffff800811ae44&gt;] print_circular_bug+0x60/0x2bc

[Â Â  21.991986]Â Â Â Â Â Â Â  [&lt;ffffff800811ee1c&gt;] __lock_acquire+0xf00/0x191c

[Â Â  21.998261]Â Â Â Â Â Â Â  [&lt;ffffff800811febc&gt;] lock_acquire+0x1e0/0x23c

[Â Â  22.004281]Â Â Â Â Â Â Â  [&lt;ffffff8008c4eb44&gt;] down_write+0x60/0xd8

[Â Â  22.009953]Â Â Â Â Â Â Â  [&lt;ffffff800884335c&gt;] cpufreq_update_policy+0x40/0x158

[Â Â  22.016663]Â Â Â Â Â Â Â  [&lt;ffffff8008557878&gt;] rockchip_system_status_notifier+0xdc/0x118

[Â Â  22.024243]Â Â Â Â Â Â Â  [&lt;ffffff80080e0c94&gt;] notifier_call_chain+0x78/0x98

[Â Â  22.030697]Â Â Â Â Â Â Â  [&lt;ffffff80080e10b0&gt;] __blocking_notifier_call_chain+0x58/0x84

[Â Â  22.038096]Â Â Â Â Â Â Â  [&lt;ffffff80080e1118&gt;] blocking_notifier_call_chain+0x3c/0x4c

[Â Â  22.045324]Â Â Â Â Â Â Â  [&lt;ffffff8008556b58&gt;] rockchip_system_status_notifier_call_chain+0x2c/0x54

[Â Â  22.053773]Â Â Â Â Â Â Â  [&lt;ffffff8008556be8&gt;] rockchip_set_system_status+0x68/0xc8

[Â Â  22.060833]Â Â Â Â Â Â Â  [&lt;ffffff8008557628&gt;] rockchip_monitor_reboot_notifier+0x18/0x3c

[Â Â  22.068412]Â Â Â Â Â Â Â  [&lt;ffffff80080e0c94&gt;] notifier_call_chain+0x78/0x98

[Â Â  22.074867]Â Â Â Â Â Â Â  [&lt;ffffff80080e10b0&gt;] __blocking_notifier_call_chain+0x58/0x84

[Â Â  22.082265]Â Â Â Â Â Â Â  [&lt;ffffff80080e1118&gt;] blocking_notifier_call_chain+0x3c/0x4c

[Â Â  22.089493]Â Â Â Â Â Â Â  [&lt;ffffff80080e2f54&gt;] kernel_restart_prepare+0x2c/0x50

[Â Â  22.096203]Â Â Â Â Â Â Â  [&lt;ffffff80080e30a0&gt;] kernel_restart+0x20/0x68

[Â Â  22.102223]Â Â Â Â Â Â Â  [&lt;ffffff80080e33f8&gt;] SyS_reboot+0x180/0x1dc

[Â Â  22.108064]Â Â Â Â Â Â Â  [&lt;ffffff8008082f70&gt;] el0_svc_naked+0x24/0x28

[Â Â  22.113989]

[Â Â  22.113989] other info that might help us debug this:

[Â Â  22.113989]

[Â Â  22.121980] Chain exists of:

&amp;policy-&gt;rwsem --&gt; (cpufreq_policy_notifier_list).rwsem --&gt; mdev_list_sem

[Â Â  22.131813]Â  Possible unsafe locking scenario:

[Â Â  22.131813]

[Â Â  22.137724]Â Â Â Â Â Â Â  CPU0Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  CPU1

[Â Â  22.142255]Â Â Â Â Â Â Â  ----Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  ----

[Â Â  22.146787]Â Â  lock(mdev_list_sem);

[Â Â  22.150223]Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  lock((cpufreq_policy_notifier_list).rwsem);

[Â Â  22.158164]Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  lock(mdev_list_sem);

[Â Â  22.164111]Â Â  lock(&amp;policy-&gt;rwsem);

[Â Â  22.167632]

[Â Â  22.167632]Â  *** DEADLOCK ***

[Â Â  22.167632]

[Â Â  22.173545] 5 locks held by systemd-shutdow/1:

[Â Â  22.177980]Â  #0:Â  (reboot_mutex){+.+...}, at: [&lt;ffffff80080e3378&gt;] SyS_reboot+0x100/0x1dc

[Â Â  22.186233]Â  #1:Â  ((reboot_notifier_list).rwsem){.+.+..}, at: [&lt;ffffff80080e1098&gt;] __blocking_notifier_call_chain+0x40/0x84

[Â Â  22.197441]Â  #2:Â  (system_status_mutex){+.+...}, at: [&lt;ffffff8008556bac&gt;] rockchip_set_system_status+0x2c/0xc8

[Â Â  22.207527]Â  #3:Â  ((system_status_notifier_list).rwsem){.+.+..}, at: [&lt;ffffff80080e1098&gt;] __blocking_notifier_call_chain+0x40/0x84

[Â Â  22.219339]Â  #4:Â  (mdev_list_sem){++++..}, at: [&lt;ffffff80085577d0&gt;] rockchip_system_status_notifier+0x34/0x118

[Â Â  22.229425]

[Â Â  22.229425] stack backtrace:

[Â Â  22.233781] CPU: 4 PID: 1 Comm: systemd-shutdow Not tainted 4.4.194 #1

[Â Â  22.240306] Hardware name: Rockchip RK3399 Board Vclusters (DT)

[Â Â  22.246218] Call trace:

[Â Â  22.248664] [&lt;ffffff8008088a40&gt;] dump_backtrace+0x0/0x234

[Â Â  22.254057] [&lt;ffffff8008088c98&gt;] show_stack+0x24/0x30

[Â Â  22.259111] [&lt;ffffff80084b0ba4&gt;] dump_stack+0xb4/0xf4

[Â Â  22.264163] [&lt;ffffff800811afcc&gt;] print_circular_bug+0x1e8/0x2bc

[Â Â  22.270075] [&lt;ffffff800811ee1c&gt;] __lock_acquire+0xf00/0x191c

[Â Â  22.275731] [&lt;ffffff800811febc&gt;] lock_acquire+0x1e0/0x23c

[Â Â  22.281124] [&lt;ffffff8008c4eb44&gt;] down_write+0x60/0xd8

[Â Â  22.286177] [&lt;ffffff800884335c&gt;] cpufreq_update_policy+0x40/0x158

[Â Â  22.292270] [&lt;ffffff8008557878&gt;] rockchip_system_status_notifier+0xdc/0x118

[Â Â  22.299221] [&lt;ffffff80080e0c94&gt;] notifier_call_chain+0x78/0x98

[Â Â  22.305047] [&lt;ffffff80080e10b0&gt;] __blocking_notifier_call_chain+0x58/0x84

[Â Â  22.311828] [&lt;ffffff80080e1118&gt;] blocking_notifier_call_chain+0x3c/0x4c

[Â Â  22.318440] [&lt;ffffff8008556b58&gt;] rockchip_system_status_notifier_call_chain+0x2c/0x54

[Â Â  22.326262] [&lt;ffffff8008556be8&gt;] rockchip_set_system_status+0x68/0xc8

[Â Â  22.332693] [&lt;ffffff8008557628&gt;] rockchip_monitor_reboot_notifier+0x18/0x3c

[Â Â  22.339644] [&lt;ffffff80080e0c94&gt;] notifier_call_chain+0x78/0x98

[Â Â  22.345470] [&lt;ffffff80080e10b0&gt;] __blocking_notifier_call_chain+0x58/0x84

[Â Â  22.352251] [&lt;ffffff80080e1118&gt;] blocking_notifier_call_chain+0x3c/0x4c

[Â Â  22.358863] [&lt;ffffff80080e2f54&gt;] kernel_restart_prepare+0x2c/0x50

[Â Â  22.364954] [&lt;ffffff80080e30a0&gt;] kernel_restart+0x20/0x68

[Â Â  22.370346] [&lt;ffffff80080e33f8&gt;] SyS_reboot+0x180/0x1dc

[Â Â  22.375568] [&lt;ffffff8008082f70&gt;] el0_svc_naked+0x24/0x28

[Â Â  22.381157] cpu cpu4: min=816000, max=816000

[Â Â  22.386760] cpu cpu0: min=816000, max=816000

[Â Â  22.401700] rk-vcodec ff660000.rkvdec: shutdown

[Â Â  22.406278] rk-vcodec ff650000.vpu_service: shutdown

[Â Â  22.415938] reboot: Restarting system

</code></pre>
<h2 id="åŸå› ">åŸå› </h2>
<p>Rockchipåœ¨åˆå§‹åŒ–æ—¶ï¼Œä¼šæ³¨å†Œä¸€ä¸ªcpuçŠ¶æ€æ›´æ–°å’Œcpuç­–ç•¥æ›´æ–°çš„é€šçŸ¥å›è°ƒã€‚ä¸¤ä¸ªå›è°ƒéƒ½ä¼šå¯¹mdev_list_semä¸Šé”</p>
<p>å…³æœºæ—¶ä¼šæ›´æ–°cpuçŠ¶æ€ï¼ˆæ€€ç–‘å…³æœºå°±æ˜¯å°†CPUé¢‘ç‡è®¾ç½®ä¸º0ï¼Œè¿™æ ·CPUå°±ä¸å·¥ä½œäº†ï¼‰</p>
<p>æ›´æ–°cpué¢‘ç‡æ—¶cpufreqé©±åŠ¨ä¼šé€šçŸ¥rockchip_system_status_notifieræ›´æ–°cpuçŠ¶æ€</p>
<p>Rockchipåœ¨æ›´æ–°cpuçŠ¶æ€æ—¶ï¼Œåè¿‡æ¥å†å»è®¾ç½®cpué¢‘ç‡å¹¶æ›´æ–°CPUç­–ç•¥</p>
<p>è€Œä¸Šä¸€æ¬¡æ›´æ–°CPUçŠ¶æ€æ—¶ï¼Œå·²ç»å¯¹mdev_list_semä¸Šé”å¹¶æœªé‡Šæ”¾ï¼Œç°åœ¨æ›´æ–°CPUç­–ç•¥åˆè¦å†æ¬¡å¯¹å®ƒä¸Šé”ï¼Œå› è€Œæ­»é”</p>
<h2 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h2>
<p>åœ¨æ›´æ–°CPUè®¾å¤‡çŠ¶æ€æ—¶ï¼Œå…ˆä¸ç€æ€¥æ›´æ–°CPUç­–ç•¥ã€‚</p>
<p>å…ˆæŠŠæ‰€æœ‰CPU è®¾å¤‡çŠ¶æ€æ›´æ–°äº†ï¼Œå¹¶è®°å½•å“ªäº›CPUè®¾å¤‡çŠ¶æ€å·²ç»æ›´æ–°ï¼Œç„¶åé‡Šæ”¾é”ã€‚</p>
<p>å†æ›´æ–°è®°å½•çš„CPUè®¾å¤‡ç­–ç•¥ã€‚æ­»é”è§£å†³</p>
<h1 id="ç»“æŸ">ç»“æŸ</h1>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è¿è¡Œæ—¶ç¨‹åºå†…å­˜dump]]></title>
        <id>https://kelephant.github.io/gridea/post/yun-xing-shi-cheng-xu-nei-cun-dump/</id>
        <link href="https://kelephant.github.io/gridea/post/yun-xing-shi-cheng-xu-nei-cun-dump/">
        </link>
        <updated>2024-04-09T07:58:08.000Z</updated>
        <summary type="html"><![CDATA[<p>åœ¨å®é™…çš„çº¿ä¸Šç¯å¢ƒä¸­ï¼Œå¦‚æœé‡åˆ°äº†é—®é¢˜ï¼Œç¨‹åºæ²¡æœ‰é€€å‡ºï¼Œå¹¶ä¸”æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœæ­¢è¿è¡Œçš„ç¨‹åºæ—¶ï¼Œå°±è¦æ±‚åœ¨åœ¨è¿è¡Œæ—¶è°ƒè¯•ç¨‹åº</p>
<p>ä½†æ˜¯é€šè¿‡gdb attachè°ƒè¯•ï¼Œå¯èƒ½åœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šä¸å°å¿ƒç ´åè¿è¡Œæ—¶ç¨‹åºï¼Œå½±å“æœåŠ¡</p>
<p>è¿™ä¸ªæ—¶å€™å¯ä»¥å°†è¿è¡Œä¸­çš„è¿›ç¨‹å†…å­˜ï¼Œdumpä¸‹æ¥ï¼Œå®Œäº†ä½¿ç”¨gdbè°ƒè¯•dumpä¸‹æ¥çš„ä¿¡æ¯</p>
]]></summary>
        <content type="html"><![CDATA[<p>åœ¨å®é™…çš„çº¿ä¸Šç¯å¢ƒä¸­ï¼Œå¦‚æœé‡åˆ°äº†é—®é¢˜ï¼Œç¨‹åºæ²¡æœ‰é€€å‡ºï¼Œå¹¶ä¸”æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœæ­¢è¿è¡Œçš„ç¨‹åºæ—¶ï¼Œå°±è¦æ±‚åœ¨åœ¨è¿è¡Œæ—¶è°ƒè¯•ç¨‹åº</p>
<p>ä½†æ˜¯é€šè¿‡gdb attachè°ƒè¯•ï¼Œå¯èƒ½åœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šä¸å°å¿ƒç ´åè¿è¡Œæ—¶ç¨‹åºï¼Œå½±å“æœåŠ¡</p>
<p>è¿™ä¸ªæ—¶å€™å¯ä»¥å°†è¿è¡Œä¸­çš„è¿›ç¨‹å†…å­˜ï¼Œdumpä¸‹æ¥ï¼Œå®Œäº†ä½¿ç”¨gdbè°ƒè¯•dumpä¸‹æ¥çš„ä¿¡æ¯</p>
<!-- more -->
<h1 id="å…·ä½“æ“ä½œ">å…·ä½“æ“ä½œ</h1>
<pre><code>1. gcore è·å–core dump
root@localhost:/share/wenqikai# gcore 177389
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.
0x00007fad882d607b in pselect () from /lib/x86_64-linux-gnu/libc.so.6
warning: Memory read failed for corefile section, 4096 bytes at 0xffffffffff600000.
Saved corefile core.177389
[Inferior 1 (process 177389) detached]

2. è°ƒè¯•
root@localhost:/share/wenqikai# gdb /usr/bin/top ./core.177389 
GNU gdb (Ubuntu 9.2-0ubuntu1~20.04.1) 9.2
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type &quot;show copying&quot; and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-linux-gnu&quot;.
Type &quot;show configuration&quot; for configuration details.
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;.
Find the GDB manual and other documentation resources online at:
    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.

For help, type &quot;help&quot;.
Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...
Reading symbols from /usr/bin/top...
(No debugging symbols found in /usr/bin/top)
[New LWP 177389]
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.
Core was generated by `top'.
#0  0x00007fad882d607b in __pselect (nfds=1, readfds=0x7ffd719b9a60, writefds=0x0, exceptfds=0x0, timeout=&lt;optimized out&gt;, sigmask=0x55a455914380)
    at ../sysdeps/unix/sysv/linux/pselect.c:48
48      ../sysdeps/unix/sysv/linux/pselect.c: No such file or directory.
(gdb) bt
#0  0x00007fad882d607b in __pselect (nfds=1, readfds=0x7ffd719b9a60, writefds=0x0, exceptfds=0x0, timeout=&lt;optimized out&gt;, sigmask=0x55a455914380)
    at ../sysdeps/unix/sysv/linux/pselect.c:48
#1  0x000055a4558d2bba in ?? ()
#2  0x00007fad881e5083 in __libc_start_main (main=0x55a4558d1e00, argc=1, argv=0x7ffd719b9c98, init=&lt;optimized out&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, 
    stack_end=0x7ffd719b9c88) at ../csu/libc-start.c:308
#3  0x000055a4558d334e in ?? ()
(gdb) info threads 
  Id   Target Id                          Frame 
* 1    Thread 0x7fad87f4d7c0 (LWP 177389) 0x00007fad882d607b in __pselect (nfds=1, readfds=0x7ffd719b9a60, writefds=0x0, exceptfds=0x0, timeout=&lt;optimized out&gt;, 
    sigmask=0x55a455914380) at ../sysdeps/unix/sysv/linux/pselect.c:48
(gdb) qQuit
(gdb) qQuit
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å†…æ ¸Call Traceè°ƒè¯•]]></title>
        <id>https://kelephant.github.io/gridea/post/nei-he-call-trace-diao-shi/</id>
        <link href="https://kelephant.github.io/gridea/post/nei-he-call-trace-diao-shi/">
        </link>
        <updated>2024-04-09T07:43:29.000Z</updated>
        <content type="html"><![CDATA[<h1 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h1>
<ol>
<li>
<p>è¯¥é“¾æ¥è®²è¿°äº†Call Trace çš„è°ƒè¯•æ–¹æ³•<br>
<a href="https://gist.github.com/doughgle/735229c34c52f9006ca92a2cf24da990">decode-kernel-call-trace.md</a></p>
</li>
<li>
<p>å¸¦symbolçš„å†…æ ¸é•œåƒå®‰è£…ï¼Œæ­£å¸¸æƒ…å†µä¸‹/usr/lib/debug/boot/ä¼šä¿å­˜å¸¦symbolçš„å†…æ ¸é•œåƒï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è‡ªè¡Œ<br>
<a href="https://wiki.ubuntu.com/Debug%20Symbol%20Packages">https://wiki.ubuntu.com/Debug Symbol Packages</a></p>
</li>
</ol>
<h1 id="è°ƒè¯•æ­¥éª¤">è°ƒè¯•æ­¥éª¤</h1>
<h2 id="åˆ›å»ºè°ƒè¯•ç›®å½•">åˆ›å»ºè°ƒè¯•ç›®å½•</h2>
<pre><code class="language-jsx">mkdir -p ~/workspace/call_trace
</code></pre>
<h2 id="è®¾è®¡å¼‚å¸¸æ¨¡å—">è®¾è®¡å¼‚å¸¸æ¨¡å—</h2>
<ol>
<li>åˆ›å»ºkernel_call_trace.cæ–‡ä»¶</li>
</ol>
<pre><code class="language-jsx">#include &lt;linux/kernel.h&gt;
#include &lt;linux/module.h&gt;
#include &lt;linux/mm.h&gt;

char *ptr = NULL;

int __init init_module(void) {
  //ptr = kmalloc(sizeof(int), GFP_KERNEL);

  *ptr = 0;

  printk(KERN_ALERT &quot;Call trace:\n&quot;);
  //backtrace();

  // BUG();

  return 0;
}

void __exit cleanup_module(void) {
  //kfree(ptr);
}
</code></pre>
<ol start="2">
<li>åˆ›å»ºMakefileæ–‡ä»¶</li>
</ol>
<pre><code class="language-jsx">obj-m := kernel_call_trace.o

all:
        make -C /usr/src/linux-headers-$(shell uname -r) M=$(PWD) modules

clean:
        make -C /usr/src/linux-headers-$(shell uname -r) M=$(PWD) clean
</code></pre>
<ol start="3">
<li>makeï¼Œç”Ÿæˆ kernel_call_trace.ko æ¨¡å—</li>
</ol>
<pre><code class="language-jsx">wenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ make 
make -C /usr/src/linux-headers-6.2.0-37-generic M=/home/wenqikai/workspace/call_trace modules
make[1]: Entering directory '/usr/src/linux-headers-6.2.0-37-generic'
warning: the compiler differs from the one used to build the kernel
  The kernel was built by: x86_64-linux-gnu-gcc-11 (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0
  You are using:           gcc-11 (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0
  CC [M]  /home/wenqikai/workspace/call_trace/kernel_call_trace.o
  MODPOST /home/wenqikai/workspace/call_trace/Module.symvers
  CC [M]  /home/wenqikai/workspace/call_trace/kernel_call_trace.mod.o
  LD [M]  /home/wenqikai/workspace/call_trace/kernel_call_trace.ko
  BTF [M] /home/wenqikai/workspace/call_trace/kernel_call_trace.ko
Skipping BTF generation for /home/wenqikai/workspace/call_trace/kernel_call_trace.ko due to unavailability of vmlinux
make[1]: Leaving directory '/usr/src/linux-headers-6.2.0-37-generic'
wenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ ls -l
total 264
-rw-rw-r-- 1 wenqikai wenqikai   3611 12æœˆ 19 13:37 call_trace.log
-rwxr-xr-x 1 wenqikai wenqikai   7383 12æœˆ 19 11:26 decode_stacktrace.sh
-rw-rw-r-- 1 wenqikai wenqikai    343 12æœˆ 19 11:33 kernel_call_trace.c
-rw-rw-r-- 1 wenqikai wenqikai 115376 12æœˆ 19 14:13 kernel_call_trace.ko
-rw-rw-r-- 1 wenqikai wenqikai     56 12æœˆ 19 14:13 kernel_call_trace.mod
-rw-rw-r-- 1 wenqikai wenqikai    891 12æœˆ 19 14:13 kernel_call_trace.mod.c
-rw-rw-r-- 1 wenqikai wenqikai  93400 12æœˆ 19 14:13 kernel_call_trace.mod.o
-rw-rw-r-- 1 wenqikai wenqikai  23344 12æœˆ 19 14:13 kernel_call_trace.o
-rw-rw-r-- 1 wenqikai wenqikai    176 12æœˆ 19 14:12 Makefile
-rw-rw-r-- 1 wenqikai wenqikai     56 12æœˆ 19 14:13 modules.order
-rw-rw-r-- 1 wenqikai wenqikai      0 12æœˆ 19 14:13 Module.symvers
</code></pre>
<ol start="4">
<li>åŠ è½½kernel_call_trace.ko æ¨¡å—ï¼Œç”±äºè¯¥å†…æ ¸æ¨¡å—æ˜¯æˆ‘ä»¬æ•…æ„åˆ¶é€ å¼‚å¸¸çš„ï¼Œæ‰€ä»¥åœ¨ä¸€åŠ è½½æ—¶ä¾¿ä¼šæŠ¥é”™ï¼Œé€šè¿‡dmesgå¯ä»¥æŸ¥åˆ°call traceä¿¡æ¯ã€‚ä¸‹é¢æ ‡çº¢éƒ¨åˆ†æ˜¯call traceçš„å®Œæ•´ä¿¡æ¯ï¼Œå…¶ä¸­å…¶ä¸­æ ‡è“éƒ¨åˆ†è¡¨ç¤ºå¼‚å¸¸çš„æ¨¡å—å</li>
</ol>
<pre><code class="language-jsx">wenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ sudo insmod  kernel_call_trace.ko 
[sudo] password for wenqikai: 
Killed
wenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ sudo dmesg | tail -100
...
[ 2023-12-19 11:34:15 ] [70466.575935] Call Trace:
[ 2023-12-19 11:34:15 ] [70466.578246]  &lt;TASK&gt;
[ 2023-12-19 11:34:15 ] [70466.585635]  ? show_regs+0x72/0x90
[ 2023-12-19 11:34:15 ] [70466.614356]  ? __die+0x25/0x80
[ 2023-12-19 11:34:15 ] [70466.614381]  ? page_fault_oops+0x79/0x190
[ 2023-12-19 11:34:15 ] [70466.615773]  ? do_user_addr_fault+0x30c/0x640
[ 2023-12-19 11:34:15 ] [70466.615775]  ? down_write+0x13/0x90
[ 2023-12-19 11:34:15 ] [70466.634448]  ? exc_page_fault+0x81/0x1b0
[ 2023-12-19 11:34:15 ] [70466.635485]  ? asm_exc_page_fault+0x27/0x30
[ 2023-12-19 11:34:15 ] [70466.635793]  ? __pfx_init_module+0x10/0x10 [kernel_call_trace]
[ 2023-12-19 11:34:15 ] [70466.635802]  ? init_module+0x14/0xff0 [kernel_call_trace]
[ 2023-12-19 11:34:15 ] [70466.635806]  ? do_one_initcall+0x46/0x240
[ 2023-12-19 11:34:15 ] [70466.635870]  ? kmalloc_trace+0x2a/0xb0
[ 2023-12-19 11:34:15 ] [70466.636483]  do_init_module+0x52/0x240
[ 2023-12-19 11:34:15 ] [70466.636737]  load_module+0xb96/0xd60
[ 2023-12-19 11:34:15 ] [70466.636740]  ? kernel_read_file+0x25c/0x2b0
[ 2023-12-19 11:34:15 ] [70466.636965]  __do_sys_finit_module+0xcc/0x150
[ 2023-12-19 11:34:15 ] [70466.636967]  ? __do_sys_finit_module+0xcc/0x150
[ 2023-12-19 11:34:15 ] [70466.636972]  __x64_sys_finit_module+0x18/0x30
[ 2023-12-19 11:34:15 ] [70466.636974]  do_syscall_64+0x59/0x90
[ 2023-12-19 11:34:15 ] [70466.636994]  ? irqentry_exit+0x43/0x50
[ 2023-12-19 11:34:15 ] [70466.636997]  ? exc_page_fault+0x92/0x1b0
[ 2023-12-19 11:34:15 ] [70466.637000]  entry_SYSCALL_64_after_hwframe+0x73/0xdd
[ 2023-12-19 11:34:15 ] [70466.637003] RIP: 0033:0x7ff0b911e69d
[ 2023-12-19 11:34:15 ] [70466.637007] Code: 5b 41 5c c3 66 0f 1f 84 00 00 00 00 00 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 &lt;48&gt; 3d 01 f0 ff ff 73 01 c3 48 8b 0d 63 a7 0f 00 f7 d8 64 89 01 48
[ 2023-12-19 11:34:15 ] [70466.637009] RSP: 002b:00007fff662d0fc8 EFLAGS: 00000246 ORIG_RAX: 0000000000000139
[ 2023-12-19 11:34:15 ] [70466.637012] RAX: ffffffffffffffda RBX: 0000562af52237b0 RCX: 00007ff0b911e69d
[ 2023-12-19 11:34:15 ] [70466.637013] RDX: 0000000000000000 RSI: 0000562af4eb5cd2 RDI: 0000000000000003
[ 2023-12-19 11:34:15 ] [70466.637015] RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
[ 2023-12-19 11:34:15 ] [70466.637016] R10: 0000000000000003 R11: 0000000000000246 R12: 0000562af4eb5cd2
[ 2023-12-19 11:34:15 ] [70466.637018] R13: 0000562af5223760 R14: 0000562af4eb4888 R15: 0000562af52238d0
</code></pre>
<ol start="5">
<li>å°†Call Traceä¿¡æ¯å­˜å‚¨åˆ°call_trace.logæ–‡ä»¶ä¸­</li>
<li>æ‹·è´å†…æ ¸ç¬¦å·è¡¨è§£æå·¥å…·åˆ°å½“å‰ç›®å½•ä¸‹</li>
</ol>
<pre><code class="language-jsx">wenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ cp /usr/src/linux-headers-$(uname -r)/scripts/decode_stacktrace.sh .
wenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ ls -l
total 264
-rw-rw-r-- 1 wenqikai wenqikai   3611 12æœˆ 19 13:37 call_trace.log
-rwxr-xr-x 1 wenqikai wenqikai   7383 12æœˆ 19 14:22 decode_stacktrace.sh
-rw-rw-r-- 1 wenqikai wenqikai    343 12æœˆ 19 11:33 kernel_call_trace.c
-rw-rw-r-- 1 wenqikai wenqikai 115376 12æœˆ 19 14:13 kernel_call_trace.ko
-rw-rw-r-- 1 wenqikai wenqikai     56 12æœˆ 19 14:13 kernel_call_trace.mod
-rw-rw-r-- 1 wenqikai wenqikai    891 12æœˆ 19 14:13 kernel_call_trace.mod.c
-rw-rw-r-- 1 wenqikai wenqikai  93400 12æœˆ 19 14:13 kernel_call_trace.mod.o
-rw-rw-r-- 1 wenqikai wenqikai  23344 12æœˆ 19 14:13 kernel_call_trace.o
-rw-rw-r-- 1 wenqikai wenqikai    176 12æœˆ 19 14:12 Makefile
-rw-rw-r-- 1 wenqikai wenqikai     56 12æœˆ 19 14:13 modules.order
-rw-rw-r-- 1 wenqikai wenqikai      0 12æœˆ 19 14:13 Module.symvers
</code></pre>
<ol start="7">
<li>ä½¿ç”¨ä»¥ä¸‹ç›®å½•è§£æ<br>
./decode_stacktrace.sh /usr/lib/debug/boot/vmlinux-$(uname -r)  auto /home/wenqikai/workspace/call_trace/ &lt; call_trace.log</li>
</ol>
<p>å‚æ•°è§£æï¼š</p>
<ul>
<li>./decode_stacktrace.shï¼šè§£æç¨‹åº</li>
<li>/usr/lib/debug/boot/vmlinux-$(uname -r)ï¼šå¸¦ç¬¦å·è¡¨çš„å†…æ ¸æ–‡ä»¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¯¥æ–‡ä»¶ï¼Œåˆ™å‚è€ƒè¯¥é“¾æ¥æ“ä½œå®‰è£…<a href="https://wiki.ubuntu.com/Debug%20Symbol%20Packages">https://wiki.ubuntu.com/Debug Symbol Packages</a></li>
<li>autoï¼š è¿™é‡Œåº”è¯¥æ˜¯è‡ªåŠ¨æ‰¾åˆ°ç³»ç»Ÿæ¨¡å—ç›®å½•</li>
<li>/home/wenqikai/workspace/call_trace/ï¼šè¿™é‡Œæ˜¯æˆ‘ä»¬è‡ªå·±çš„æ¨¡å—å­˜æ”¾ç›®å½•</li>
<li>call_trace.logï¼šcall traceæ–‡ä»¶</li>
</ul>
<pre><code class="language-jsx">wenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ ./decode_stacktrace.sh 
ERROR! vmlinux image must be specified
Usage:
        ./decode_stacktrace.sh -r &lt;release&gt; | &lt;vmlinux&gt; [&lt;base path&gt;|auto] [&lt;modules path&gt;]
wenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ ./decode_stacktrace.sh /usr/lib/debug/boot/vmlinux-$(uname -r)  auto /home/wenqikai/workspace/call_trace/ &lt; call_trace.log 
[70466.575935] Call Trace:
[70466.578246]  &lt;TASK&gt;
[70466.585635] ? show_regs (arch/x86/kernel/dumpstack.c:479) 
[70466.614356] ? __die (arch/x86/kernel/dumpstack.c:421 arch/x86/kernel/dumpstack.c:434) 
[70466.614381] ? page_fault_oops (arch/x86/mm/fault.c:727) 
[70466.615773] ? do_user_addr_fault (arch/x86/mm/fault.c:1270) 
[70466.615775] ? down_write (arch/x86/include/asm/preempt.h:80 kernel/locking/rwsem.c:261 kernel/locking/rwsem.c:1313 kernel/locking/rwsem.c:1323 kernel/locking/rwsem.c:1574) 
[70466.634448] ? exc_page_fault (arch/x86/include/asm/paravirt.h:700 arch/x86/mm/fault.c:1479 arch/x86/mm/fault.c:1527) 
[70466.635485] ? asm_exc_page_fault (arch/x86/include/asm/idtentry.h:570) 
[70466.635793] ? __pfx_init_module (/home/wenqikai/workspace/call_trace/kernel_call_trace.c:7) kernel_call_trace
[70466.635802] ? init_module (/home/wenqikai/workspace/call_trace/kernel_call_trace.c:10) kernel_call_trace
[70466.635806] ? do_one_initcall (init/main.c:1295) 
[70466.635870] ? kmalloc_trace (mm/slab_common.c:1065) 
[70466.636483] do_init_module (kernel/module/main.c:2463) 
[70466.636737] load_module (kernel/module/main.c:2872) 
[70466.636740] ? kernel_read_file (fs/kernel_read_file.c:110) 
[70466.636965] __do_sys_finit_module (kernel/module/main.c:2972) 
[70466.636967] ? __do_sys_finit_module (kernel/module/main.c:2972) 
[70466.636972] __x64_sys_finit_module (kernel/module/main.c:2939) 
[70466.636974] do_syscall_64 (arch/x86/entry/common.c:50 arch/x86/entry/common.c:80) 
[70466.636994] ? irqentry_exit (kernel/entry/common.c:446) 
[70466.636997] ? exc_page_fault (arch/x86/mm/fault.c:1531) 
[70466.637000] entry_SYSCALL_64_after_hwframe (arch/x86/entry/entry_64.S:120) 
[70466.637003] RIP: 0033:0x7ff0b911e69d
./decode_stacktrace.sh: line 225: ./decodecode: No such file or directory
[70466.637009] RSP: 002b:00007fff662d0fc8 EFLAGS: 00000246 ORIG_RAX: 0000000000000139
[70466.637012] RAX: ffffffffffffffda RBX: 0000562af52237b0 RCX: 00007ff0b911e69d
[70466.637013] RDX: 0000000000000000 RSI: 0000562af4eb5cd2 RDI: 0000000000000003
[70466.637015] RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
[70466.637016] R10: 0000000000000003 R11: 0000000000000246 R12: 0000562af4eb5cd2
[70466.637018] R13: 0000562af5223760 R14: 0000562af4eb4888 R15: 0000562af52238d0
[70466.637038]  &lt;/TASK&gt;
</code></pre>
<h1 id="å…¶ä»–">å…¶ä»–</h1>
<p>åŒ…æŸ¥æ‰¾æ–¹æ³•<br>
æ–¹æ³•1. sudo aptitude search linux-image-$(uname -r)-dbgsym</p>
<p>æ–¹æ³•2. 	$ apt search linux-image-$(uname -r)</p>
<p>Sorting... Done<br>
Full Text Search... Done<br>
linux-image-5.4.0-80-generic/focal-updates,focal-security,now 5.4.0-80.90 amd64 [installed,automatic]<br>
Signed kernel image generic</p>
<pre><code>	linux-image-5.4.0-80-generic-dbgsym/focal-updates,now 5.4.0-80.90 amd64 [installed]
	  Signed kernel image generic

	$ sudo apt install linux-image-`uname -r`-dbgsym

</code></pre>
<h1 id="ç»“æŸ">ç»“æŸ</h1>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å…³äº]]></title>
        <id>https://kelephant.github.io/gridea/post/about/</id>
        <link href="https://kelephant.github.io/gridea/post/about/">
        </link>
        <updated>2019-01-25T11:09:48.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤</p>
</blockquote>
<h2 id="å…³äºæœ¬ç«™">ğŸ  å…³äºæœ¬ç«™</h2>
<h2 id="åšä¸»æ˜¯è°">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</h2>
<h2 id="å…´è¶£çˆ±å¥½">â›¹ å…´è¶£çˆ±å¥½</h2>
<h2 id="è”ç³»æˆ‘å‘€">ğŸ“¬ è”ç³»æˆ‘å‘€</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://kelephant.github.io/gridea/post/hello-gridea/</id>
        <link href="https://kelephant.github.io/gridea/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="https://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>